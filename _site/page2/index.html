<!DOCTYPE html>
<html lang="zh-CN">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>漫漫前端路</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/assets/css/highlight.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link href='http://fonts.googleapis.com/css?family=Raleway|PT+Serif' rel='stylesheet' type='text/css'>
</head>


  <body>
    <nav id="site-nav" class=" ">
    <ul>
        <li>
            <a href="/" class="tooltip">
                <span class="iconfont icon-home"></span>
                <span>Home</span>
            </a>

        </li>
        <li>
            <a href="/category/article" class="tooltip">
                <span class="iconfont icon-article"></span>
                <span>Technique</span>
            </a>

        </li>
        <li>
            <a href="/category/life" class="tooltip">
                <span class="iconfont icon-camera"></span>
                <span>Life</span>
            </a>

        </li>
        <li>
            <a href="/about" class="tooltip">
                <span class="iconfont icon-user"></span>
                <span>About me</span>
            </a>

        </li>
    </ul>
</nav>
    <header class="site-header">
  <div class="wrapper">
    <div class="img-wrapper">
      <img src="http://7sbqpj.com1.z0.glb.clouddn.com//site-header2.jpg">
      <div class="site-title">
        <p>In 鎌倉</p>
      </div>
    </div>

    <div class="aside-info">
      <div>
          <img src="http://7sbqpj.com1.z0.glb.clouddn.com/IMG_2491.jpg" class="aside-img" alt="theme-author">
          <h3 style="color: #f3f3f3;margin-top: 5px">Jiao Xiang</h3>
      </div>
      <ul class="header-ul">
        
        <li>
          <a href="mailto:sho.jiao@gmail.com">
            <span class="icon iconfont icon-mail">
            </span>
            E-mail
        </a>
        </li>
        

        
        <li>
          <a href="https://github.com/polly343900">
              <span class="icon iconfont icon-github">
              </span>
            Github
          </a>
        </li>
        

        
        <li>
          <a href="https://twitter.com/polly343900">
              <span class="icon iconfont icon-twitter">
              </span>
            Twitter
          </a>
        </li>
        

        
        <li >
          <a href="http://weibo.com/polly343900">
              <span class="icon iconfont icon-weibo">
              </span>
            Weibo
          </a>
        </li>
        
      </ul>
    </div>

  </div>
</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  <ul class="post-list">
    
      <li class="post-article">
        <span class="post-meta">Jan 5, 2015</span>

        <h2>
          <a class="post-link" href="/articles/function/">函数</a>
        </h2>
        <h5>1. 函数声明</h5>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">funcName</span><span class="p">(){</span>
        <span class="p">...</span>
    <span class="p">}</span></code></pre></div>

<p>由于声明提前，可以在定义之前调用此函数。不能出现在循环，条件判断，或者try/catch/finally以及with语句里。</p>

<p>此外，要注意函数内的的变量声明也是会提前的。这里经常笔面试出题。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">scope</span><span class="o">=</span><span class="s2">&quot;global&quot;</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">scopeTest</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">scope</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">scope</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">;</span> <span class="c1">//scope变量提前到console.log语句前。</span>
    <span class="p">}</span>
    <span class="nx">scopeTest</span><span class="p">();</span> <span class="c1">//undefined</span></code></pre></div>

<h5>2. 函数表达式(函数名可选，在递归时通常会写函数名)</h5>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="p">...</span>
    <span class="p">}</span></code></pre></div>

<p>不能在定义之前调用。</p>

<h3>函数调用及其调用上下文</h3>

<h5>1. 作为函数</h5>

<p>非严格模式下，<strong>调用上下文</strong>（this值)是全局对象，严格模式下，<strong>调用上下文</strong>是undefined.</p>

<h5>2. 作为方法</h5>

<p>调用上下文和与函数调用不同。指的<strong>是</strong>当前对象，而<strong>不是</strong>全局对象。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// An object o.</span>
        <span class="nx">m</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Method m of the object.</span>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span> <span class="c1">// Save the this value in a variable.</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nx">o</span><span class="p">);</span>  <span class="c1">// 1.Prints &quot;true&quot;: this is the object o.</span>
            <span class="nx">f</span><span class="p">();</span> <span class="c1">// 作为函数调用,因此其调用上下文是全局对象或者undefined。所以2的结果为false</span>
            <span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span> <span class="c1">// A nested function f</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nx">o</span><span class="p">);</span> <span class="c1">// 2.&quot;false&quot;: this is global or undefined</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">self</span> <span class="o">===</span> <span class="nx">o</span><span class="p">);</span><span class="c1">// 3.&quot;true&quot;: self is the outer this value.</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">m</span><span class="p">();</span><span class="c1">// 作为方法调用，其调用上下文为当前对象。因此1的结果为true。</span></code></pre></div>

<p>当方法的返回值是对象时，对象还可调用其方法,行成方法链。就像jQuery一样。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">ob</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">m</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="nx">ob</span><span class="p">.</span><span class="nx">m</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="nx">m</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span></code></pre></div>

<h5>3. 作为构造函数</h5>

<p>函数/方法前带有关键字new，就构成了构造函数调用。</p>

<p>构造函数调用创建一个新的空的对象，这个对象继承自构造函数的prototype属性。构造函数的<strong>调用上下文</strong>为新创建的对象。</p>

<p>构造函数通常不用return关键字，通常返回的是新创建的的对象的值。比如熟悉的<code>var obj = new Object;</code>。</p>

<p>当构造函数显式地使用return语句返回对象时，返回的就是该对象；如果返回的是原始值，则跟没有显式使用return是一样的。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">test1</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">;</span> <span class="c1">//returns a primitive value</span>
      <span class="p">}</span>

    <span class="c1">//Results</span>
    <span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">test1</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
    <span class="kc">undefined</span>
    <span class="o">&gt;</span> <span class="nx">x</span>
    <span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">test2</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">{</span><span class="mi">1</span><span class="o">:</span><span class="mi">2</span><span class="p">};</span> <span class="c1">//returns an object</span>
    <span class="p">}</span>
    <span class="c1">//Results</span>
    <span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">test2</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">);</span>
    <span class="kc">undefined</span>
    <span class="o">&gt;</span> <span class="nx">y</span>
    <span class="p">{</span> <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span></code></pre></div>

<h5>4. 通过call(),apply()间接调用</h5>

<p>第一个实参是要调用函数的母对象，它是<strong>调用上下文</strong>，<code>f.call(o)</code>以及<code>f.apply(o)</code>的意思是：以对象o的方法来调用f函数。</p>

<p>严格模式下，第一个实参都会变成this的值，哪怕传入的实参是原始值/null/undefined</p>

<p>非严格模式下，传入的null/undefined会被全局变量代替。</p>

<p>apply和call的区别在于传入实参的形式不同，比如<code>apply(o,[x,y,z...])</code>与<code>call(o,x,y,z,...)</code>。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">coinFace</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="nx">coinFace</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Heads! Flipping again...&quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">coinFace</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Tails! Done flipping.&quot;</span><span class="p">);</span></code></pre></div>

      </li>
    
      <li class="post-article">
        <span class="post-meta">Jan 2, 2015</span>

        <h2>
          <a class="post-link" href="/life/new-year/">新的一年</a>
        </h2>
        <p>2015第一天的日出：</p>

<figure>
    <img src="http://7sbqpj.com1.z0.glb.clouddn.com/sunrise1.jpg" alt="img">
    <figcaption>Sunrise @Home</figcaption>
</figure>

<p>最后，希望新的一年，家人平安，一切顺利，梦想达成。</p>

      </li>
    
  </ul>
  <div class="pagination clearfix">
    <div class="fl">
        
        
        <a class="pagination-item" href="/">Newer</a>
        
        
    </div>
    <div class="fr">
        
        <span class="pagination-item disabled">Older</span>
        
    </div>
</div>
</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <span>&copy; 2015 . Powered by
      <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a>.
    </span>


  </div>

</footer>
<!-- Baidu Analysis -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?c8cbf7f57c14536e175a61dc20887032";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
<!-- Google Analysis -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58181454-1', 'auto');
  ga('send', 'pageview');

</script>
<script src="/assets/js/main.js" type="text/javascript"></script>


    <script src="http://192.168.10.149:8080/target/target-script-min.js#anonymous"></script>
  </body>

</html>
